import Deps

apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
//apply plugin: 'kotlin-kapt'


android {

    compileSdkVersion Android.compileSdkVersion

    defaultConfig {
        minSdkVersion Android.minSdkVersion
        targetSdkVersion Android.targetSdkVersion
        versionCode 1
        versionName "1.0.0"
        applicationId "com.github.jmfayard.okandroid"
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
        multiDexEnabled true
    }

    sourceSets {
        main.java.srcDirs += 'src/main/kotlin'
        test.java.srcDirs += 'src/test/kotlin'
    }

    packagingOptions {
        exclude 'LICENSE.txt'
        exclude 'META-INF/rxjava.properties'
    }

}

dependencies {
    /*** other projects **/
    compile(project(path: ':common'))
    compile(project(path: ':androidcommon'))
    compile(project(path: ':room'))

    /****** TESTING ****/
    testCompile Deps.KotlinTest
    testCompile Deps.kotlin("reflect")
    testCompile Deps.kotlin("test")
    testCompile Deps.JUnit
    testCompile Deps.MockitoKotlin
    testCompile Deps.OkhttpMockserver
    testCompile Deps.RoomTesting

    androidTestCompile Deps.KotlinTest
    androidTestCompile Deps.EspressoCore
    androidTestCompile Deps.EspressoContrib

    // Kotlin
    compile Deps.kotlin("stdlib")

    // Support & google libraries
    compile Deps.AndroidSupport(
            "support-v4", "appcompat-v7", "preference-v7",
            "design", "percent", "cardview-v7", "customtabs")
    compile Deps.Multidex
    compile Deps.AndroidxCore
    compile Deps.ConstraintLayout

    compile Deps.Timber
    compile Deps.Fakeit
    compile Deps.AndroidJob

    compileOnly Deps.Jsr305
    testCompileOnly Deps.Jsr305

    compile Deps.RxJava2
    compile Deps.RxKotlin
    compile Deps.RxBindingKotlin
    compile Deps.RxBindingV4Kotlin

    compile Deps.Okhttp
    compile Deps.OkhttpLogging
    compile Deps.Moshi
    compile Deps.Okio
    compile Deps.Retrofit
    compile Deps.RetrofitMoshi
    compile Deps.RetrofitMock
    compile Deps.RetrofitRxjava2
    compile Deps.RxPermissions


    /** UX **/
    compile Deps.MaterialDialogs
    compile Deps.Calligraphy
    compile Deps.Magellan
    compile Deps.MagellanSupport
    compile Deps.MagellanRx
    compile Deps.SlimAdapter
    compile Deps.KotlinAndroidViewBindings





}

tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {
    kotlinOptions {
        freeCompilerArgs = ["-Xjsr305=strict"]
    }
}
